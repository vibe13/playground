= {ProductNameExt} ({ProductName}) Alignment with SLSA Requirements
:toc:

== Executive Summary

This document describes how the _Build Platform_ {ProductNameExt} ({ProductName}) aligns with the Supply-chain Levels for Software Artifacts (SLSA) v1.2 specification.

It presents:

* An overview of the SLSA framework
* Relevant terminology and concepts
* Architecture and control mechanisms implemented by {ProductName}
* Mapping of platform capabilities to SLSA Build Level 3 requirements

This document is intended for security reviewers, auditors, and platform adopters evaluating supply-chain assurance provided by {ProductName}.

== Scope and Compliance Claim

This evaluation assesses {ProductName} against the SLSA v1.2 Build Track, solely in its role as a SLSA *Build Platform*.

{ProductName} is designed to produce artifacts meeting the requirements for link:https://slsa.dev/spec/v1.2/build-track-basics#build-l3-hardened-builds[SLSA Build Level 3]. As of the v1.2 specification, Build Level 3 (L3) is the highest Build Level.

**Scope includes**

* Provenance generation
* Attestation signing
* Secret protection
* Build isolation enforcement

**Out of Scope**

* Producer workflow configuration or adoption
* Source repository governance
* Artifact consumer verification policies

== SLSA Overview

link:https://slsa.dev/[Supply-chain Levels for Software Artifacts (SLSA)] is a security framework that defines progressive levels of assurance for software supply chains. It provides a shared language and control model to demonstrate that software artifacts were built in a trustworthy and traceable manner.

SLSA organizes requirements into independent *tracks*, each addressing a different lifecycle phase.

SLSA v1.2 introduces two primary tracks:

* link:https://slsa.dev/spec/v1.2/build-track-basics[Build Track] — assurance of artifact construction and provenance trustworthiness  
* link:https://slsa.dev/spec/v1.2/source-requirements[Source Track] — assurance of source revision governance and integrity  

The addition of the Source Track makes SLSA a more complete supply chain framework by expanding beyond *build security* to include *source integrity*. 

== Foundational Concepts

Understanding SLSA requires familiarity with the following core terms:

* **Artifact** — output produced by a build (binaries, images, packages)
* **Provenance** — metadata describing how an artifact was produced
* **Attestation** — signed statement asserting provenance
* **Digest** — cryptographic identifier of an artifact
* **Producer** — entity defining the build process
* **Build Platform** — system executing the build and generating provenance

These concepts enable verification that artifacts are authentic, unmodified, and derived from expected inputs.

== Tracks Overview

=== Build Track

Responsibility for achieving a build level is split between the link:https://slsa.dev/spec/v1.2/build-requirements#producer[*Producer*] and the link:https://slsa.dev/spec/v1.2/build-requirements#build-platform[*Build Platform*]. The _Build Platform_ MUST strengthen the security controls in order to achieve a specific level while the _Producer_ MUST choose and adopt a build platform capable of achieving a desired build level.

Build Platform primary responsibilities:

* Generate trustworthy **provenance**
* Enforce **build isolation**

Build Levels:

|===
| Level | Goal

| L1
| Provenance exists describing build (_completeness_)

| L2
| Hosted platform generates signed provenance (_authenticity_)

| L3
| Hardened platform prevents build tampering (_integrity_)
|===

{ProductName} targets **Build Level 3**.


=== Source Track

The Source Track measures trust in how source revisions are governed.

|===
| Level | Goal

| L1
| Source is version controlled

| L2
| Source history is immutable

| L3
| Changes require review and revision provenance

| L4
| Strong technical enforcement of two-party review
|===

⚠️ {ProductName} operates as a Build Platform and does not control repository governance. Source Track requirements are therefore outside scope of this evaluation.

== {ProductName} Build Architecture

=== Provenance

SLSA defines provenance as  “the verifiable information about software artifacts describing where, when and how something was produced”.

{ProductName} generates SLSA provenance containing a subject identifying which artifact the provenance belongs to, and a predicate describing the build process, including relevant links.

This provenance is exposed via the Orchestrator Service, and its _completeness_ reflects how comprehensively it describes the artifact build process.

==== Attestation, Signing, and Secret Management

Provenance is delivered as signed attestations that associate artifacts with their build metadata. This allows consumers to verify _authenticity_, _integrity_, and origin of artifacts produced by {ProductName}, ensuring attestations have not been tampered with.

Higher SLSA levels require hardened provenance authenticity. In this context, **tenants** refer to user-submitted build workloads executed by the platform (e.g., ephemeral build pods running untrusted build code), not Kubernetes namespaces or administrative users.

{ProductName} enforces attestation trust by:

* Signing attestations using platform-managed private keys
* Restricting key access to the Orchestrator service
* Storing signing secrets in IBM Cloud Secrets Manager
* Separating signing secrets from execution environments used by tenant workloads
* Preventing exposure of signing material to build workloads


=== Build isolation

One of the primary responsibilities defined by the SLSA Build Track is ensuring artifacts are produced without unauthorized influence. This is achieved through the use of hosted and isolated build environments that generate trustworthy provenance.

At Build Level 2, builds must execute on a hosted platform that generates signed provenance.  
At Build Level 3, the platform must enforce strong isolation and tamper protections during execution.

==== Hosted

Executing builds on individual workstations introduces inconsistency and risk. Local environments may contain untracked dependencies, configuration drift, or malware that can affect outputs.

To shrink the attack plane, SLSA dictates that builds should execute “using a hosted build platform on shared or dedicated infrastructure, not on an individual’s workstation.” By using an environment that comes from a known, auditable state, build platforms can largely ensure that they generate artifacts in the same way every time.

{ProductName} satisfies this requirement by operating as a hosted build platform. Builds are executed on link:https://cloud.ibm.com/docs/openshift[Red Hat OpenShift on IBM Cloud], providing controlled infrastructure with reproducible baseline environments.

This approach supports:

* Consistent build execution  
* Platform-level provenance generation  
* Infrastructure auditability  
* Reduced exposure to workstation compromise  

==== Internally isolated

While hosted execution protects against local workstation threats, additional safeguards are required to prevent interference within the platform itself.

Build Level 3 emphasizes hardened platforms that:

* Prevent builds from influencing one another  
* Protect signing materials from user workloads  
* Limit cross-tenant or insider tampering  

These controls ensure that forging provenance or altering artifacts requires exploiting platform vulnerabilities rather than simple access or configuration manipulation.

{ProductName} enforces internal isolation through multiple mechanisms:

* Builds execute in ephemeral pods, preventing persistence between runs  
* Namespaced separation between user workloads and provenance services  
* Provenance is signed outside user-controlled execution contexts  

This architecture:

* Prevents environment poisoning across builds  
* Protects attestation signing keys  
* Ensures provenance authenticity  
* Aligns with hardened build platform objectives  

== Provenance Distribution

Provenance is accessible through platform APIs for retrieval and verification by consumers.

Distribution mechanisms ensure:

* Traceability
* External validation capability
* Artifact linkage

== Artifact Verification Model

Consumers may verify:

* Attestation signatures
* Artifact digests
* Provenance contents

Verification confirms artifact origin and build integrity.


== How {ProductName} meets the requirements for SLSA Build L3

The following table summarizes how {ProductName} conforms to the specification for producing SLSA Build L3 software artifacts.

[cols="1,1, 1"]
|===
|Build level |Requirements |How we meet them

3+^|_For provenance_ (see link:https://slsa.dev/spec/v1.2/build-requirements#provenance-generation[Provenance Generation])

|L1: Provenance exists
a|Provenance:

* ✅ MUST be generated by the build process.
* ✅ MUST be formatted per SLSA guidelines, or contain equivalent information.
* ✅ SHOULD be as complete as possible.

a|Provenance in {ProductName} is:

* Generated from the Orchestrator Service for each software artifact on demand via REST API, from the data persisted during the build execution.
* Formatted according to SLSA guidelines, compliant with Attestation Type `https://in-toto.io/Statement/v1` and Predicate Type `https://slsa.dev/provenance/v1`.
* Complete with all the relevant information.

|L2: Provenance is Authentic
a|Provenance:

* ❌ MUST be verifiable by users for authenticity.
* ✅ MUST be generated by the control plane and not by a tenant of the build platform (unless the data is obtained from the build platform).
* ✅ SHOULD be complete, although some external parameters MAY not be captured.

a|Provenance in {ProductName} is:

* Currently NOT signed by the Orchestrator Service (or equivalent Service within the Build Platform control plane). This is going to be addressed in link:https://issues.redhat.com/browse/NCL-XXXX[NCL-XXXX].
* The Orchestrator Service is responsible for the provenance generation, and is separated from execution environments used by tenant workloads.
* Almost complete (missing or improved external parameters will be addressed in link:https://issues.redhat.com/browse/NCL-7025[NCL-7025 (Rebuild Mode)] and link:https://issues.redhat.com/browse/NCL-9516[NCL-9516 (Build environment digests)]).

ℹ️ At the time of writing, it's not determined if the Orchestrator Service will actually generate and sign the provenance, or provide all the required data to a delegated Service. This is however inline with the Level 2 requirements: "The data in the provenance MUST be obtained from the build platform, either because the generator is the build platform or because the provenance generator reads the data directly from the build platform".

** IMPROVE: the attestations will be stored in Quay.io in a dedicated organization.
** CLARIFY: does the organization ^ need to be public? how that would become a risk in making the provenance information public? if it needs to be private, hoe could I make the user validate the provenance via an intermediate service?


|L3: Provenance is Unforgeable
a|Provenance is complete, authentic, and accurate:

* ✅ Secret material used to authenticate provenance MUST be stored in a secure management system.
* ✅ Secret material is not accessible to the environment running user-defined build steps.
* ❌ Provenance is complete, including fully enumerated external parameters.

a|{ProductName}:

* Stores secret materials in link:https://cloud.ibm.com/catalog/services/secrets-manager[IBM Cloud Secrets Manager], which is a secure management system.
* The execution environments used by tenant workloads does not have access to any secret material used to generate the provenance.
* There are a few external parameters not enumerated (will be addressed in link:https://issues.redhat.com/browse/NCL-7025[NCL-7025 (Rebuild Mode)] and link:https://issues.redhat.com/browse/NCL-9516[NCL-9516 (Build environment digests)])


3+^|_For build isolation_ (see link:https://slsa.dev/spec/v1.2/build-requirements#isolation-strength[Isolation Strength])

|L1
|✅ No build isolation requirements apply for L1 conformance.
|N/A

|L2: Hosted build platform
|✅ All build steps run on a hosted build platform using shared or dedicated infrastructure, not on an individual’s workstation.
|{ProductName} is hosted on link:https://cloud.ibm.com/docs/openshift[Red Hat OpenShift on IBM Cloud].

|L3: Isolated builds
a|Builds run in an isolated environment:

* ✅ It MUST NOT be possible for a build to access any build platform secrets, such as the provenance signing key.
* ✅ It MUST NOT be possible for overlapping builds to influence one another.
* ✅ It MUST NOT be possible for a build to persist or influence the environment of subsequent builds.
* ✅ It MUST NOT be possible for a build to inject false entries into a cache used by another build (“cache poisoning”).
* ❌ The build platform MUST NOT expose services allowing remote influence unless all such interactions are captured as `externalParameters` in the provenance.

a|In {ProductName}:

* Build executions run in isolated ephemeral pods where required environment variables and secrets are injected by the control plane; other secrets, including signing keys, are not accessible.
* Build executions run in isolated ephemeral pods with no network access between builds, preventing cross-build interaction.
* Build executions run in isolated ephemeral pods where a new build environment is provisioned per each build.
* Build executions run in isolated pods with per-build ephemeral filesystems (`emptyDir`), and no writable storage is shared across builds or tenants. Dependency proxy caches (e.g., Maven Central, npmjs.org) are exposed read-only and cannot be modified by build workloads. Artifacts produced by builds are published through a promotion process that enforces immutability and prevents redeployment or overwrite of existing identifiers (e.g., Maven GAV coordinates). Consequently, one build cannot inject or alter cache content consumed by another build, and artifact resolution yields identical outputs regardless of cache usage.
* The platform does not expose build-time services for external influence beyond controlled dependency retrieval. Outcome-affecting external inputs are captured in provenance as resolved dependencies, including exact SCM commit SHAs (or the source code) and dependency URIs with SHA-256 digests (for resolved dependencies). The build environment image is currently referenced by tag, with a planned change to record an immutable digest to eliminate tag mutability risk (link:https://issues.redhat.com/browse/NCL-9516[NCL-9516 (Build environment digests)]).
|===

